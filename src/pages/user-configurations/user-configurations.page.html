<app-custom-header
  title="PERFIL USUÁRIO"
  [showStartButton]="true"
  startIconName="close-outline"
  (onStartClick)="getBack()"
  [showEndButton]="true"
  endIconName="checkmark"
></app-custom-header>

<ion-content class="ion-padding" [formGroup]="cadastroForm">
  <div class="profile-section">
    <div class="avatar-upload" (click)="selecionarImagem()">
      @if (imagemPreview) {
      <img [src]="imagemPreview" alt="Foto de perfil" class="avatar-image" />
      } @else {
      <div class="avatar-placeholder">
        <ion-icon name="person-outline" class="placeholder-icon"></ion-icon>
      </div>
      }
      <div class="upload-overlay">
        <ion-icon name="camera-outline" class="camera-icon"></ion-icon>
      </div>
      <input
        type="file"
        hidden
        accept="image/*"
        #fileInput
        (change)="onImagemSelecionada($event)"
      />
    </div>
    <ion-note class="upload-hint">Toque para alterar sua foto</ion-note>
  </div>

  <ion-list lines="none" class="form-section">
    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">CPF</ion-label>
      <ion-input
        type="text"
        formControlName="cpf"
        maxlength="14"
        (ionInput)="formatarCPF($event)"
      ></ion-input>
    </ion-item>

    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">Nome completo</ion-label>
      <ion-input formControlName="nome"></ion-input>
    </ion-item>

    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">Endereço</ion-label>
      <ion-input formControlName="endereco"></ion-input>
    </ion-item>

    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">Senha</ion-label>
      <ion-input
        type="password"
        formControlName="senha"
        [clearOnEdit]="false"
      ></ion-input>
    </ion-item>

    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">Subtítulo</ion-label>
      <ion-input formControlName="subtitle"></ion-input>
    </ion-item>

    <ion-item fill="solid" class="form-item">
      <ion-label position="floating">Serviços prestados</ion-label>
      <ion-input formControlName="servicesProvided"></ion-input>
    </ion-item>

    <ion-item fill="solid" class="toggle-item">
      <ion-toggle
        formControlName="aceitarMensagemOutrosUsuarios"
        slot="end"
      ></ion-toggle>
      <ion-label>Não aceitar mensagens de outros usuários</ion-label>
    </ion-item>
  </ion-list>

  <div class="wallpaper-section">
    <ion-label class="section-title">Papel de parede do perfil</ion-label>
    <div class="wallpaper-upload" (click)="selecionarWallpaper()">
      @if (wallpaperPreview) {
      <img [src]="wallpaperPreview" alt="Wallpaper" class="wallpaper-image" />
      } @else {
      <div class="wallpaper-placeholder">
        <ion-icon name="image-outline" class="placeholder-icon"></ion-icon>
        <span>Selecionar imagem</span>
      </div>
      }
      <input
        type="file"
        hidden
        accept="image/*"
        #wallpaperInput
        (change)="onWallpaperSelecionado($event)"
      />
    </div>

    @if (wallpaperPreview) {
    <ion-button
      fill="clear"
      color="danger"
      size="small"
      (click)="removerWallpaper()"
      class="remove-button"
    >
      <ion-icon slot="start" name="trash-outline"></ion-icon>
      Remover
    </ion-button>
    }
  </div>
</ion-content>

<app-footer-menu></app-footer-menu>
