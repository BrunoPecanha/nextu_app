<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>CADASTRO EMPRESA</ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [formGroup]="cadastroForm">
  <ion-item>
    <ion-label position="floating">CPF</ion-label>
    <ion-input
      type="text"
      formControlName="cpf"
      maxlength="14"
      (ionInput)="formatarCPF($event)"
    ></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">CNPJ</ion-label>
    <ion-input
      type="text"
      formControlName="cnpj"
      maxlength="18"
      (ionInput)="formatarCNPJ($event)"
    ></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">NOME EMPRESA</ion-label>
    <ion-input formControlName="nomeEmpresa"></ion-input>
  </ion-item>

  <div class="logo-wrapper">
    <div class="logo-container" (click)="selecionarImagem()">
      <img
        *ngIf="imagemPreview"
        [src]="imagemPreview"
        alt="Logo Preview"
        class="logo-preview"
      />
      <ion-icon
        *ngIf="!imagemPreview"
        name="cloud-upload-outline"
        class="upload-icon"
      ></ion-icon>
      <input
        type="file"
        accept="image/*"
        hidden
        #fileInput
        (change)="onImagemSelecionada($event)"
      />
    </div>

    <div class="logo-msg">Clique para enviar a logo</div>
  </div>

  <div class="horario-box">
    <ion-label class="label-titulo">Horários de Atendimento: *</ion-label>

    <div class="horario-scroll">
      <ion-grid>
        <ion-row
          *ngFor="let dia of diasSemana; let i = index"
          [formGroup]="getHorarioFormGroup(i)"
          class="ion-align-items-center"
        >
          <ion-col size="4">
            <ion-label>{{ dia }}</ion-label>
          </ion-col>

          <ion-col size="2">
            <ion-toggle formControlName="ativo"></ion-toggle>
          </ion-col>

          <ion-col size="6" *ngIf="getHorarioFormGroup(i).get('ativo')?.value">
            <ion-item>
              <ion-label position="floating">Início</ion-label>
              <ion-input type="time" formControlName="inicio"></ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Fim</ion-label>
              <ion-input type="time" formControlName="fim"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <ion-item lines="none" class="ion-margin-top">
      <ion-label>Abrir fila automaticamente</ion-label>
      <ion-toggle formControlName="abrirAutomaticamente"></ion-toggle>
    </ion-item>
  </div>

  <ion-button
    expand="block"
    color="primary"
    class="btn-cadastro"
    [disabled]="enviando || enviado"
    (click)="enviar()"
  >
    <ion-spinner *ngIf="enviando" name="crescent"></ion-spinner>
    <span *ngIf="!enviando && !enviado">Cadastro</span>
    <ion-icon
      *ngIf="enviado"
      name="checkmark-circle"
      class="check-icon"
    ></ion-icon>
  </ion-button>
</ion-content>
