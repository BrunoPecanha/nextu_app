<ion-toolbar>
  <ion-buttons slot="start">
    <ion-menu-button></ion-menu-button>
  </ion-buttons>
  <ion-title *ngIf="userRole === 'owner'">GERENC. COLABORADOR</ion-title>
  <ion-title *ngIf="userRole === 'professional'">CONVITES RECEBIDOS</ion-title>
</ion-toolbar>

<ion-content class="ion-padding">
  <!-- Dono do Estabelecimento -->
  <ng-container *ngIf="userRole === 'owner'">
    <ion-list>
      <ion-item>
        <ion-label position="floating">CPF do Profissional</ion-label>
        <ion-input [(ngModel)]="cpfInput" type="text"></ion-input>
      </ion-item>
      <ion-button
        expand="block"
        color="primary"
        class="ion-margin-top"
        (click)="enviarConvite()"
      >
        <ion-icon slot="start" name="send-outline"></ion-icon>
        Enviar Convite
      </ion-button>
    </ion-list>

    <!-- Funcionários Aceitos -->
    <ion-card *ngIf="professionals.length > 0">
      <ion-card-header>
        <ion-card-title
          >Funcionários ({{ professionals.length }})</ion-card-title
        >
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let prof of professionals; let i = index">
            <ion-avatar slot="start">
              <ion-icon
                name="person-circle-outline"
                style="font-size: 32px"
              ></ion-icon>
            </ion-avatar>
            <ion-label>
              <h3>{{ prof.name }}</h3>
              <p>CPF: {{ prof.cpf }}</p>
            </ion-label>
            <ion-button
              fill="clear"
              color="danger"
              size="small"
              slot="end"
              (click)="confirmarRemocaoProfissional(i)"
            >
              <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Convites Pendentes -->
    <ion-card *ngIf="sentInvites.length > 0">
      <ion-card-header>
        <ion-card-title
          >Convites Pendentes ({{ sentInvites.length }})</ion-card-title
        >
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let invite of sentInvites; let i = index">
            <ion-avatar slot="start">
              <ion-icon
                name="hourglass-outline"
                style="font-size: 32px; color: orange"
              ></ion-icon>
            </ion-avatar>
            <ion-label>
              <h3>{{ invite.establishmentName }}</h3>
              <p>Aguardando resposta</p>
            </ion-label>
            <ion-button
              fill="clear"
              color="danger"
              size="small"
              slot="end"
              (click)="confirmarCancelamentoConvite(i)"
            >
              <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </ng-container>

  <!-- Profissional com Convites -->
  <ng-container *ngIf="userRole === 'professional'">
    <ion-list *ngIf="pendingInvites.length > 0">
      <ion-item *ngFor="let invite of pendingInvites">
        <ion-avatar slot="start">
          <ion-icon
            name="business-outline"
            style="font-size: 32px; color: #3880ff"
          ></ion-icon>
        </ion-avatar>
        <ion-label>
          <h3>{{ invite.establishmentName }}</h3>
          <p>Convite para associação</p>
        </ion-label>
        <ion-buttons slot="end">
          <ion-button
            size="small"
            fill="clear"
            color="success"
            (click)="aceitarConvite(invite.id)"
          >
            <ion-icon
              slot="icon-only"
              name="checkmark-circle-outline"
            ></ion-icon>
          </ion-button>
          <ion-button
            size="small"
            fill="clear"
            color="medium"
            (click)="recusarConvite(invite.id)"
          >
            <ion-icon slot="icon-only" name="close-circle-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>

    <ion-card *ngIf="pendingInvites.length === 0">
      <ion-card-content class="text-center">
        Nenhum convite pendente no momento.
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>

<app-footer-menu></app-footer-menu>